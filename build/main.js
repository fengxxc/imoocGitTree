!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){class n{constructor(t,e){this._val=t||"",this._isLeaf=n.checkIsLeaf(t),this._firstLeafChildIndex=-1,this._childs=e||[],this._val2ChildIndexMap=new Map,this._childs.forEach((t,e)=>this.setVal2ChildIndexMap(t.val,e))}get val(){return this._val}set val(t){this._val=t}get isLeaf(){return this._isLeaf}set isLeaf(t){this._isLeaf=t}get firstLeafChildIndex(){return this._firstLeafChildIndex}set firstLeafChildIndex(t){this._firstLeafChildIndex=t}get childs(){return this._childs}set childs(t){this._childs=t}getVal2ChildIndexMap(){return this._val2ChildIndexMap}setVal2ChildIndexMap(t,e){this._val2ChildIndexMap.set(t,e)}getChildByIndex(t){return this._childs[t]}getChildByVal(t){return this._childs[this._val2ChildIndexMap.get(t)]}deleteChildByVal(t){this._childs.splice([this._val2ChildIndexMap.get(t)],1)}hasChildVal(t){return this._val2ChildIndexMap.has(t)}hasChild(t){return this.hasChildVal(t.val)}putChild(t){if(this.hasChild(t))return this.getChildByVal(t.val);let e=-1;return t.isLeaf?(-1==this.firstLeafChildIndex&&(this.firstLeafChildIndex=this.childs.length),this._childs.push(t),e=this.childs.length-1):-1!=this.firstLeafChildIndex?(this._childs.splice(this.firstLeafChildIndex,0,t),this.firstLeafChildIndex++,e=this.firstLeafChildIndex):(this._childs.push(t),e=this.childs.length-1),this.setVal2ChildIndexMap(t.val,e),t}static _toTreeString(t,e,i,r){let s=[];for(let o=0;o<t.childs.length;o++){const a=t.childs[o],l=i?i(a):a.val,h=o==t.childs.length-1;s.push(e+(h?"╰─ ":"├─ ")+l+"\n"),s.push(n._toTreeString(a,e+(h?"   ":"│  "),i,r)),r&&r(a)}return s.join("")}toString(){return n._toTreeString(this,[])}static _toJson(t){return{val:t.val,firstLeafChildIndex:t.firstLeafChildIndex,childs:(e=t.childs,e.map(t=>n._toJson(t)))};var e}toJson(){return n._toJson(this)}toJsonString(){return JSON.stringify(this.toJson())}static checkIsLeaf(t){return t.search(/\./)>0}static removeUrlHash(t){return t.lastIndexOf("#")>-1&&(t=t.slice(0,t.lastIndexOf("#"))),t}static buildByPathString(t,e,i,r){const s=(i=n.removeUrlHash(i)).split(e);for(let e=0,i=t;e<s.length;e++){if(""==s[e])continue;let t=new n(s[e],[]);if(r&&(t=r(t,e==s.length-1)),i.hasChildVal(s[e])&&t.childs.length>0){const n=i.getChildByVal(s[e]),r=t.getVal2ChildIndexMap();n.getVal2ChildIndexMap().forEach((t,e)=>{r.has(e)||n.deleteChildByVal(e)}),r.forEach((e,i)=>{n.putChild(t.getChildByVal(i))})}else i=i.putChild(t)}}static buildByJson(t){return new n(t.val,t.childs.map(t=>n.buildByJson(t)))}}t.exports=n},function(t,e,n){t.exports=n(2)},function(t,e,n){const i=n(0),r=n(3),s=()=>{const t=window.location,e=window.localStorage.getItem("imoocGitTreeCache");let n=null;e?n=i.buildByJson(JSON.parse(e)):(n=new i(t.origin),window.localStorage.setItem("imoocGitTreeCache",n));let s=t.pathname;const o=document.querySelectorAll("#repo-files-table td.name");o?i.buildByPathString(n,"/",s,(t,e)=>(e&&(o.forEach(e=>t.putChild(new i(e.innerText.trim(),[]))),o.forEach(t=>console.log("find: "+t.innerText.trim()))),t)):i.buildByPathString(n,"/",s),window.localStorage.setItem("imoocGitTreeCache",n.toJsonString()),r.render(n,"/",s)};s(),t.exports={main:s}},function(t,e,n){const i=n(0);class r{static getRenderString(t,e,n){(n=i.removeUrlHash(n)).startsWith(e)&&(n=n.slice(e.length));let r=n.split(e),s=[t.val];return i._toTreeString(t,"",t=>r.length>=0&&r[0]==t.val?(r.shift(),`<a href="${s.push(t.val),s.join("/")}" class="imt-mark">${t.val}</a>`):`<a href="${s.push(t.val),s.join("/")}">${t.val}</a>`,()=>s.pop())}static getStyleHTML(){return"\n            <style>\n                .imooc-tree-switch {\n                    position: fixed;\n                    top: 4px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    flex-direction: column;\n                    width: 42px;\n                    height: 42px;\n                    background-color: white;\n                    border-radius: 50% ;\n                    transition: transform 250ms ease;\n                    cursor: pointer;\n                    z-index: 200;\n                }\n                .imooc-tree-switch span {\n                    position: relative;\n                    display: block;\n                    width: 50%;\n                    height: 2px;\n                    background-color: #444 !important;\n                    float: left;\n                    transform-origin: center center;\n                    transition: transform 250ms ease;\n                    z-index: 200;\n                } \n\n                .imooc-tree-switch span:nth-of-type(1) { \n                    transform: translateY(-5px); \n                } \n                .imooc-tree-switch span:nth-of-type(3) { \n                    transform: translateY(5px); \n                } \n                #imoocTreeSwitch {\n                    display: none;\n                }\n                #imoocTreeSwitch:checked ~ .imooc-tree-switch {\n                    background-color: transparent;\n                    transform: rotate(360deg);\n                    transition: transform 250ms ease;\n                }\n                #imoocTreeSwitch:checked ~ .imooc-tree-switch span {\n                    background-color: white;\n                    transition: transform 250ms ease;\n                }\n                #imoocTreeSwitch:checked ~ .imooc-tree-switch span:nth-of-type(1) {\n                    transform: translateY(1px) rotate(45deg);\n                }\n                #imoocTreeSwitch:checked ~ .imooc-tree-switch span:nth-of-type(2) {\n                    display: none;\n                }\n                #imoocTreeSwitch:checked ~ .imooc-tree-switch span:nth-of-type(3) {\n                    transform: translateY(-1px) rotate(-45deg);\n                }\n                #imoocTreeSwitch:checked ~ #imoocTree {\n                    left: 0px;\n                    transition: left 500ms ease;\n                }\n                #imoocTree {\n                    position: fixed;\n                    padding-top: 44px;\n                    left: -360px;\n                    width: 360px;\n                    overflow: auto;\n                    height: 100%;\n                    background-color: #f3f5f6;\n                    transition: left 500ms ease;\n                }\n                #imoocTreeSwitch:checked ~ .full.height {\n                    /* transform: translateX(360px); */\n                    margin-left: 360px;\n                    transition: margin-left 500ms ease;\n                }\n                .full.height {\n                    /* transform: translateX(0px) */;\n                    margin-left: 0px;\n                    transition: margin-left 500ms ease;\n                }\n                .imt-mark {\n                    color: #3dc73a;\n                }\n            </style>\n        ".trim()}static getSwitchBtnHTML(){return'\n            <input type="checkbox" id="imoocTreeSwitch">\n            <label for="imoocTreeSwitch" class="imooc-tree-switch" title="imoocGitTree">\n                <span></span>\n                <span></span>\n                <span></span>\n            </label>\n        '.trim()}static getTreeHTML(t){return`<pre id="imoocTree">${t}</pre>`}static render(t,e,n){const i=r.getStyleHTML()+r.getSwitchBtnHTML()+r.getTreeHTML(r.getRenderString(t,e,n));document.querySelector("body").insertAdjacentHTML("afterbegin",i)}}t.exports=r}]);